<!doctype html><html lang=zh itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/logo-square-remake.png><title>APKeep: Realtime Verification for Real Networks - NetVerify
</title><meta name=description content><meta name=generator content="Hugo 0.145.0"><link rel=stylesheet href="https://xjtu-netverify.github.io/css/styles.min.ac3193f5f07436e8c8916e256083f1c3c00965e6953bf2a8b61d2f3ae08a3c22.css" integrity="sha256-rDGT9fB0NujIkW4lYIPxw8AJZeaVO/Koth0vOuCKPCI="><meta property="og:url" content="https://xjtu-netverify.github.io/zh/papers/2020-apkeep-realtime-verification-for-real-networks/"><meta property="og:site_name" content="NetVerify"><meta property="og:title" content="APKeep: Realtime Verification for Real Networks"><meta property="og:description" content="网络验证团队"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="papers"><meta property="article:published_time" content="1970-01-01T00:33:40+00:00"><meta property="article:modified_time" content="1970-01-01T00:33:40+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="APKeep: Realtime Verification for Real Networks"><meta name=twitter:description content="网络验证团队"><meta itemprop=name content="APKeep: Realtime Verification for Real Networks"><meta itemprop=description content="网络验证团队"><meta itemprop=datePublished content="1970-01-01T00:33:40+00:00"><meta itemprop=dateModified content="1970-01-01T00:33:40+00:00"><meta name=lang content="zh"></head><body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><div id=header class="header bg-transparent fixed z-10 w-full min-h-32 flex items-center"><header class="w-full lg:max-w-5xl flex mx-auto items-center relative"><div class="header-items w-full flex gap-4 px-6 my-4 justify-between items-center relative"><div class="logo capitalize text-2xl flex-left flex-shrink-0"><div class="flex gap-2"><a href=http://ants.xjtu.edu.cn class=title-group><img src=/ants-logo.png alt class="inline dark:hidden h-8 max-w-full">
<img src=/ants-logo-dark.png alt class="hidden dark:inline h-8 max-w-full"></a><div>|</div><a href=/ class=title-group><img class="inline dark:hidden" height=32 width=130 src=/netverify.png>
<img class="hidden dark:inline" height=32 width=130 src=/netverify-dark.png></a></div></div><div class="flex-right flex flex-col items-end"><button class="mobile-menu-button md:hidden"><svg width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><ul class="mobile-menu md:relative z-10 pl-6 py-6 md:p-0 top-full left-0 w-full flex-grow hidden md:flex md:flex-wrap flex-col md:flex-row md:ml-5 justify-center md:justify-end items-end md:items-center gap-6"><li><a class="text-highlight-light transition-all ease-in-out decoration-2 underline-offset-4 hover:underline decoration-highlight-dark" href=/zh/research>研究领域</a></li><li><a class="text-highlight-light transition-all ease-in-out decoration-2 underline-offset-4 hover:underline decoration-highlight-dark" href=/zh/people>团队成员</a></li><li><a class="text-highlight-light transition-all ease-in-out decoration-2 underline-offset-4 hover:underline decoration-highlight-dark" href=/zh/papers>论文发表</a></li><li class="flex items-center"><svg class="mr-2" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><line x1="3.6" y1="9" x2="20.4" y2="9"/><line x1="3.6" y1="15" x2="20.4" y2="15"/><path d="M11.5 3a17 17 0 000 18"/><path d="M12.5 3a17 17 0 010 18"/></svg>
<a href=/en/ lang=en>English</a></li><li class="grid place-items-center"><span class="toggle-dark-mode inline-block cursor-pointer"><svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="3"/><line x1="12" y1="5" x2="12" y2="5.01"/><line x1="17" y1="7" x2="17" y2="7.01"/><line x1="19" y1="12" x2="19" y2="12.01"/><line x1="17" y1="17" x2="17" y2="17.01"/><line x1="12" y1="19" x2="12" y2="19.01"/><line x1="7" y1="17" x2="7" y2="17.01"/><line x1="5" y1="12" x2="5" y2="12.01"/><line x1="7" y1="7" x2="7" y2="7.01"/></svg></span></li></ul></div></div></header><script>const nav=document.getElementById("header"),mobileMenuButton=document.querySelector(".mobile-menu-button"),mobileMenu=document.querySelector(".mobile-menu"),navContent=nav.children[0];function refreshTopBar(){const e=Math.min(window.scrollY/80,1);nav.style.boxShadow=`0 0 24px rgba(0, 0, 0, ${e*e*e*.1})`,nav.style.minHeight=`${e*4+(1-e)*8}rem`}window.onscroll!=(()=>{})&&(window.onscroll=refreshTopBar);function toggleMenu(){nav.classList.toggle("menu-expanded"),mobileMenu.classList.toggle("hidden"),mobileMenu.classList.toggle("flex")}mobileMenu&&mobileMenuButton&&mobileMenuButton.addEventListener("click",toggleMenu);function toggleDarkMode(){document.documentElement.classList.contains("dark")?(document.documentElement.classList.remove("dark"),localStorage.setItem("darkmode","light")):(document.documentElement.classList.add("dark"),localStorage.setItem("darkmode","dark"))}const darkmode=document.querySelector(".toggle-dark-mode");darkmode&&darkmode.addEventListener("click",toggleDarkMode);const darkStorage=localStorage.getItem("darkmode"),isBrowserDark=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;!darkStorage&&isBrowserDark&&document.documentElement.classList.add("dark"),darkStorage&&darkStorage==="dark"&&toggleDarkMode()</script></div><main class=flex-1><div class="container max-w-screen-lg px-6 py-12 mx-auto flex flex-col flex-auto prose prose-zinc dark:prose-dark dark:prose-invert"><div class="flex flex-col"><h1>APKeep: Realtime Verification for Real Networks</h1><div class="flex flex-row flex-wrap"><b>Author: </b>&nbsp;<div class="flex flex-row flex-wrap" style=gap:0><a style=text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:4px;text-decoration-color:#d4d4d8 href=/people/pzhang>Peng Zhang
</a>,&nbsp;
<a style=text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:4px;text-decoration-color:#d4d4d8 href=/people/xliu>Xu Liu
</a>,&nbsp;<div>Hongkun Yang</div>,&nbsp;
<a style=text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:4px;text-decoration-color:#d4d4d8 href=/people/nkang>Ning Kang
</a>,&nbsp;<div>Zhengchang Gu</div>,&nbsp;and&nbsp;
<a style=text-decoration-style:dotted;text-decoration-thickness:2px;text-underline-offset:4px;text-decoration-color:#d4d4d8 href=https://gr.xjtu.edu.cn/en/web/hao.li>Hao Li</a></div></div><div class=italic>Proceedings of USENIX NSDI'20</div></div><div><h2>People</h2><div class="flex flex-row justify-around"><div class="p-0 flex flex-col justify-center items-center"><a href=https://xjtu-netverify.github.io/zh/people/pzhang/><div class=relative><img src=/people/pzhang/photo.jpg alt="Peng Zhang" class="m-0 mb-4 rounded-full shadow-sm h-24 object-cover" style=height:6rem></div></a><div class="my-2 flex flex-col flex-wrap items-center"><div class=p-0><a href=https://xjtu-netverify.github.io/zh/people/pzhang/><div class="text-xl font-semibold">Peng Zhang</div></a></div><h5 class="text-sm font-light italic text-gray-500">Professor</h5></div></div><div class="p-0 flex flex-col justify-center items-center"><a href=https://xjtu-netverify.github.io/zh/people/xliu/><div class=relative><img src=/people/xliu/photo.jpg alt="Xu Liu" class="m-0 mb-4 rounded-full shadow-sm h-24 object-cover" style=height:6rem></div></a><div class="my-2 flex flex-col flex-wrap items-center"><div class=p-0><a href=https://xjtu-netverify.github.io/zh/people/xliu/><div class="text-xl font-semibold">Xu Liu</div></a></div><h5 class="text-sm font-light italic text-gray-500">Ph.D. Candidate</h5></div></div><div class="p-0 flex flex-col justify-center items-center"><a href=https://xjtu-netverify.github.io/zh/people/nkang/><div class=relative><img src=/people/nkang/photo.jpg alt="Ning Kang" class="m-0 mb-4 rounded-full shadow-sm h-24 object-cover" style=height:6rem></div></a><div class="my-2 flex flex-col flex-wrap items-center"><div class=p-0><a href=https://xjtu-netverify.github.io/zh/people/nkang/><div class="text-xl font-semibold">Ning Kang</div></a></div><h5 class="text-sm font-light italic text-gray-500">Ph.D. Candidate</h5></div></div></div></div><div><h2>Abstract</h2>Realtime network verification ensures the correctness of network by incrementally checking data plane updates in real time (e.g., < 1ms per rule update). Even state-of-the-art methods can already achieve sub-millisecond verification time, such speed is achieved mostly for pure IP forwarding devices, and is unrealistic for real-world networks, due to two reasons. (1) Their network models cannot express the forwarding behavior of real devices, which have various functions including IP forwarding, ACL, NAT, policy-based routing, etc. (2) Their update algorithms do not scale in space and/or time: multifield rules (e.g., ACL rules) can make these tools run out of memory and/or incur long verification time. To scale realtime verification to real networks, we propose APKeep based on a new modular network model that is expressive for real devices, and propose new algorithms that can achieve low memory cost and fast update speed at the same time. Our experiments show that for real-world update traces consisting of IP forwarding rules and ACL rules, existing methods either run out of memory or incur a prohibitively long verification time, while APKeep still achieves a sub-millisecond verification time. We also show that APKeep can verify an update of NAT rule mostly in less than 1 millisecond.</div><div class="flex flex-row gap-2 mt-2"><div class="font-light text-zinc-400 dark:text-zinc-600 italic">Research Area:</div><a href=/research/Verification>Verification</a></div><h2>Video</h2><div class="relative w-full overflow-hidden" style=padding-top:56.25%><iframe class="absolute top-0 left-0 bottom-0 right-0 w-full h-full border-none" src="https://www.youtube.com/embed/SHDVeGM4h8E?si=PREHXlJwmek1ji2B" title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy=strict-origin-when-cross-origin allowfullscreen></iframe></div><h2>Resources</h2><div class="flex flex-row gap-6 flex-wrap"><span class=inline-block><a class="flex flex-row" style=text-decoration-line:none;gap:.5rem href=https://www.usenix.org/system/files/nsdi20-paper-zhang-peng.pdf><svg class="inline" height="1.5em" viewBox="180 96 600 960"><path fill="currentcolor" d="M336 816h288v-72H336v72zm0-144h288v-72H336v72zm-72.283 288Q234 960 213 938.85T192 888V264q0-29.7 21.15-50.85T264 192h312l192 192v504q0 29.7-21.162 50.85Q725.676 960 695.96 960H263.717zM528 432V264H264v624h432V432H528zM264 264v189-189 624-624z"/></svg>
PDF
</a></span><span class=inline-block><a class="flex flex-row" style=text-decoration-line:none;gap:.5rem href=https://www.usenix.org/sites/default/files/conference/protected-files/nsdi20_slides_zhang_1.pdf><svg class="inline" height="1.5em" viewBox="0 96 960 960"><path fill="currentcolor" d="M840 912V312H120v360H48V312q0-29.7 21.15-50.85Q90.3 240 120 240h720q29.7.0 50.85 21.15Q912 282.3 912 312v528q0 29-21.15 50.5T840 912zM336 672q-60 0-102-42t-42-102 42-102 102-42 102 42 42 102-42 102-102 42zm.212-72Q366 6e2 387 578.788q21-21.213 21-51Q408 498 386.788 477q-21.213-21-51-21Q306 456 285 477.212q-21 21.213-21 51Q264 558 285.212 579q21.213 21 51 21zM48 960v-92q0-26 12.5-47T95 786q54-33 115.691-49.5Q272.381 720 336 720q64 0 124.5 16.5T577 786q22 13 34.5 34.61T624 868v92H48zm72-72h432v-24q0-5.176-3.025-9.412Q545.95 850.353 541 848q-48-27-99.5-41.5T336 792t-106 14.5T131 848q-5 3-8 7.034-3 4.035-3 8.966v24zm216-360zm0 360z"/></svg>
Slide
</a></span><span class=inline-block><a class="flex flex-row" style=text-decoration-line:none;gap:.5rem href=https://github.com/XJTU-NetVerify/apkeep><svg class="inline" height="1.8em" viewBox="50 96 860 960"><path fill="currentcolor" d="M336 802.153 109.847 576 336 349.847l36.768 36.768-189 189L373.153 765 336 802.153zm288 0-36.768-36.768 189-189L586.847 387 624 349.847 850.153 576 624 802.153z"/></svg>
Code
</a></span><span class=inline-block><a class="flex flex-row" style=text-decoration-line:none;gap:.25rem href=https://www.usenix.org/conference/nsdi20/presentation/zhang-peng><svg class="inline" height="1.5em" viewBox="0 96 960 960"><path fill="currentcolor" d="M480.276 960Q401 960 331 930t-122.5-82.5T126 725.042q-30-69.959-30-149.5Q96 496 126 426.5t82.5-122T330.958 222q69.959-30 149.5-30Q560 192 629.5 222t122 82.5T834 426.724q30 69.725 30 149Q864 655 834 725t-82.5 122.5T629.276 930q-69.725 30-149 30zM432 884v-68q-20 0-34-14.1T384 768v-48L175 511q-4 19-5.5 35t-1.5 30q0 115 74.5 203T432 884zm288-109q18-21 31.5-44t22.359-48.553q8.86-25.553 13.5-52.5Q792 603 792 576q0-94.608-52-172.804T6e2 288v24q0 29.7-21.15 50.85Q557.7 384 528 384h-96v48q0 20.4-13.8 34.2T384 480h-48v96h240q20.4.0 34.2 13.8Q624 603.6 624 624v96h41q23 0 39 16t16 39z"/></svg>
Web</a></span></div><div><h2>BibTeX</h2><pre class="bg-slate-100 text-black dark:bg-gray-900 dark:text-white"><code>@inproceedings {246370,
    author = {Peng Zhang and Xu Liu and Hongkun Yang and Ning Kang and Zhengchang Gu and Hao Li},
    title = {{APKeep}: Realtime Verification for Real Networks },
    booktitle = {17th USENIX Symposium on Networked Systems Design and Implementation (NSDI 20)},
    year = {2020},
    isbn = {978-1-939133-13-7},
    address = {Santa Clara, CA},
    pages = {241--255},
    url = {https://www.usenix.org/conference/nsdi20/presentation/zhang-peng},
    publisher = {USENIX Association},
    month = feb
}</code></pre></div></div></main><footer><div class="bg-blue-100 dark:bg-gray-900"><div class="container px-4 py-12 mx-auto max-w-6xl flex flex-col md:flex-row justify-between items-center"><div class="flex-grow-0 flex-shrink w-full"><div class="text-2xl font-bold mb-2">联系我们团队</div><p class=opacity-60>如果你对我们 NetVerify 团队感兴趣，欢迎联系我们！</p></div><ul class="flex justify-start md:justify-end mt-10 md:mt-0 gap-x-3 flex-wrap gap-y-2 w-full"><li><a href=/joinus><button class="button-4 dark:bg-gray-800 dark:text-white" style=margin-right:8px>
Join us</button></a></li><li><a href=mailto:mailto:augists@duck.com target=_blank rel=noopener aria-label=email class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"><svg width="24" height="24" fill="currentcolor" class="bi bi-envelope" viewBox="0 0 16 16"><path d="M0 4a2 2 0 012-2h12a2 2 0 012 2v8a2 2 0 01-2 2H2a2 2 0 01-2-2V4zm2-1A1 1 0 001 4v.217l7 4.2 7-4.2V4a1 1 0 00-1-1H2zm13 2.383-4.708 2.825L15 11.105V5.383zm-.034 6.876-5.64-3.471L8 9.583l-1.326-.795-5.64 3.47A1 1 0 002 13h12a1 1 0 00.966-.741zM1 11.105l4.708-2.897L1 5.383v5.722z"/></svg></a></li><li><a href=https://github.com/XJTU-NetVerify target=_blank rel=noopener aria-label=GitHub class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"><svg width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.xjtu.edu.cn target=_blank rel=noopener aria-label=logo class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"><img height=24 width=24 src=/xjtu.png></a></li></ul></div></div><div class="container p-6 mx-auto flex justify-between items-center"><span class="text-sm font-light">Copyright © 2024 - NetVerify Lab - ANTS Group in XJTU · All rights reserved
</span><span onclick='window.scrollTo({top:0,behavior:"smooth"})' class="p-1 cursor-pointer"><svg width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 15l-6-6-6 6h12"/></svg></span></div></footer></body></html>